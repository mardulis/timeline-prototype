body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
    monospace;
}

/* ===============================
   Scroll Fades (Theme-agnostic)
   Uses CSS masks to fade content
   =============================== */

.scroll-fade {
  position: relative;
  overflow: auto;             /* the scroll container */
  -webkit-overflow-scrolling: touch;
  --fade-size: 36px;          /* tweak fade height */
}

/* Inner wrapper that receives the mask */
.scroll-inner {
  /* nothing special here; your content flows normally */
}

/* Default: no fades */
.scroll-fade:not(.has-overflow) .scroll-inner {
  -webkit-mask-image: none;
  mask-image: none;
}

/* Helper to build a top fade mask */
@supports ((mask-image: linear-gradient(black, transparent)) or (-webkit-mask-image: linear-gradient(black, transparent))) {
  .scroll-fade.has-overflow.at-top .scroll-inner {
    /* Only bottom fade visible */
    -webkit-mask-image:
      linear-gradient(to bottom, black calc(100% - var(--fade-size)), transparent 100%);
    mask-image:
      linear-gradient(to bottom, black calc(100% - var(--fade-size)), transparent 100%);
  }

  .scroll-fade.has-overflow.at-bottom .scroll-inner {
    /* Only top fade visible */
    -webkit-mask-image:
      linear-gradient(to top, black calc(100% - var(--fade-size)), transparent 100%);
    mask-image:
      linear-gradient(to top, black calc(100% - var(--fade-size)), transparent 100%);
  }

  .scroll-fade.has-overflow:not(.at-top):not(.at-bottom) .scroll-inner {
    /* Top + bottom fades (two masks combined) */
    -webkit-mask-image:
      linear-gradient(to bottom, transparent 0, black var(--fade-size), black calc(100% - var(--fade-size)), transparent 100%);
    mask-image:
      linear-gradient(to bottom, transparent 0, black var(--fade-size), black calc(100% - var(--fade-size)), transparent 100%);
  }

  /* Improve mask quality on Safari/WebKit */
  .scroll-fade .scroll-inner {
    -webkit-mask-size: 100% 100%;
    mask-size: 100% 100%;
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
  }
}

/* ---------- Fallback (no mask support): subtle overlays ----------
   These use theme-aware transparency to avoid "black bars".
*/
@supports not (mask-image: linear-gradient(black, transparent)) and not (-webkit-mask-image: linear-gradient(black, transparent)) {
  .scroll-fade::before,
  .scroll-fade::after {
    content: "";
    position: sticky;
    left: 0; right: 0;
    height: var(--fade-size);
    pointer-events: none;
    z-index: 1;
    display: none;
    /* Use background of the scroll area via a translucent layer */
    background: linear-gradient(to bottom, rgba(0,0,0,0.15), rgba(0,0,0,0));
  }
  .scroll-fade::before { top: 0; transform: scaleY(-1); } /* invert to get top fade */
  .scroll-fade::after { bottom: 0; }

  .scroll-fade.has-overflow:not(.at-top)::before { display: block; }
  .scroll-fade.has-overflow:not(.at-bottom)::after { display: block; }

  @media (prefers-color-scheme: light) {
    .scroll-fade::before,
    .scroll-fade::after {
      background: linear-gradient(to bottom, rgba(255,255,255,0.75), rgba(255,255,255,0));
    }
  }
}
